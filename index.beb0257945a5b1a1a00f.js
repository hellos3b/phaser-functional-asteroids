!function(t){function n(n){for(var r,u,a=n[0],c=n[1],s=n[2],l=0,p=[];l<a.length;l++)u=a[l],o[u]&&p.push(o[u][0]),o[u]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);for(f&&f(n);p.length;)p.shift()();return i.push.apply(i,s||[]),e()}function e(){for(var t,n=0;n<i.length;n++){for(var e=i[n],r=!0,a=1;a<e.length;a++){var c=e[a];0!==o[c]&&(r=!1)}r&&(i.splice(n--,1),t=u(u.s=e[0]))}return t}var r={},o={0:0},i=[];function u(n){if(r[n])return r[n].exports;var e=r[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,u),e.l=!0,e.exports}u.m=t,u.c=r,u.d=function(t,n,e){u.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},u.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,n){if(1&n&&(t=u(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(u.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)u.d(e,r,function(n){return t[n]}.bind(null,r));return e},u.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return u.d(n,"a",n),n},u.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},u.p="";var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=n,a=a.slice();for(var s=0;s<a.length;s++)n(a[s]);var f=c;i.push([352,1,2]),e()}({351:function(t,n,e){},352:function(t,n,e){"use strict";e.r(n);var r={};e.r(r),e.d(r,"spritesheet",function(){return c}),e.d(r,"spaceship",function(){return s}),e.d(r,"explosion",function(){return f});var o={};e.r(o),e.d(o,"boost",function(){return l}),e.d(o,"dead",function(){return p}),e.d(o,"flip",function(){return y}),e.d(o,"gameOST",function(){return d});var i={};e.r(i),e.d(i,"Splash",function(){return h}),e.d(i,"Game",function(){return Ce});e(155),e(320);var u=e(45),a=e.n(u),c=(e(351),{path:"assets/sprites/spritesheet.png",width:32,height:32,frames:16}),s={path:"assets/sprites/spaceship.png",width:32,height:32,frames:24},f={path:"assets/sprites/explosion.png",width:128,height:128,frames:5},l={path:["assets/audio/boost.wav"]},p={path:["assets/audio/dead.wav"]},y={path:["assets/audio/flip-up.wav"]},d={path:["assets/music/space-ost-game.mp3"]},h={preload:function(){var t;t=this,Object.keys(r).forEach(function(n){return function(t,n,e){return t.load.spritesheet(n,e.path,e.width,e.height,e.frames)}(t,n,r[n])}),Object.keys(o).forEach(function(n){return function(t,n,e){return t.game.load.audio(n,e.path)}(t,n,o[n])})},create:function(){this.state.start("Game")}};function m(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function v(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(e.push(u.value),!n||e.length!==n);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var w=function(t){return{apply:function(n){return t&&n(t)},get:function(){return t},getOrElse:function(n){return void 0===t?n:t}}},x=function(t){var n=t.length;return function e(r){return function(){var o=g(r).concat(Array.prototype.slice.call(arguments));return o.length>=n?t.apply(this,o):e(o)}}([])},_=(x(function(t,n){return console.log(t,n),n}),function(t){return"object"===b(t)&&!(t instanceof Array)&&null!==t}),O=x(function(t,n){for(var e in t)if(t[e]!==n[e])return!1;return!0}),j=function t(n){var e=new Set([]),r=Object.entries(n).reduce(function(n,e){var r=v(e,2),o=r[0],i=r[1];return function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.forEach(function(n){m(t,n,e[n])})}return t}({},n,m({},o,_(i)?t(i):i))},{}),o={},i={get:function(t,n){var i=this;return"$dirty"===n?g(e):"$clean"===n?function(){e=new Set([]),o={}}:"$old"===n?function(t,n){return new Proxy(t,{get:function(t,e){return void 0!==n[e]?n[e]:t[e]},set:function(){throw new Error("Cannot modify original state")}})}(r,o):"$commit"===n?function(n){return Object.entries(n).map(function(n){var e=v(n,2),r=e[0],o=e[1];return i.set(t,r,o)}),t}:t[n]},set:function(n,r,i){return n[r]===i||(!(!_(i)||!O(n[r],i))||(e.add(r),void 0===o[r]&&(o[r]=n[r]),n[r]=_(i)?t(i):i,!0))}};return new Proxy(r,i)};x(function(t,n){n});function S(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function A(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(e.push(u.value),!n||e.length!==n);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}window.c_=x;var E=x(function(t,n){return w(t[n])}),P=x(function(t){return t.time.physicsElapsed}),T=x(function(t,n){return Object.assign(t,n)}),k=x(function(t,n){return Object.assign(n,t)}),M=(x(function(t,n,e){return w(e[t]).getOrElse([]).length?n(e):e}),x(function(t,n){for(var e=Object.keys(n),r=0;r<e.length;r++){var o=e[r];n[o]instanceof Object&&o in t&&Object.assign(n[o],T(t[o],n[o]))}return Object.assign(t||{},n),t}),x(function(t,n){return t.concat(n)})),R=x(function(t,n){return Math.floor(Math.random()*(n-t))+t}),C=x(function(t,n){return n.map(t)}),$=(x(function(t,n){return t>=n}),x(function(t,n){return t+R(-1*n,n)})),B=x(function(t){return t*(Math.PI/180)}),Q=x(function(t){return Number(t).toLocaleString()}),D=(x(function(t,n){return console.log(t,n),n}),x(function(t,n,e){return e[t]?e:n(e)}),x(function(t,n,e){return e[t]?n(e):e})),I=x(function(t,n,e){return!0===e[t]?n(e):e}),F=x(function(t,n){return n.filter(t)}),G=x(function(t,n,e){var r=e-t;return r<t?0:r>n?1:r/(n-t)}),V=x(function(t,n,e){return t+(e=(e=e>1?1:e)<0?0:e)*(n-t)}),q=x(function(t,n,e){return t-(e=(e=e>1?n:e)<0?t:e)*(t-n)}),H=function(t){return t.reduce(function(t,n){return T(t,n)},{})},L=x(function(t,n){return n.reduce(function(n,e){return n[e]=t,n},{})}),z=(x(function(t){return function(n,e){n||(n={}),n[e]=t}}),x(function(t,n,e){return t[n]=e,e}),x(function(t,n){return n.forEach(t)})),J=function(t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},t,n)}},N=x(function(t,n){return Object.entries(n).map(function(n){var e=A(n,2),r=e[0],o=e[1];return t(r,o)})}),X=x(function(t,n){return S(t).concat([n])});x(function(t,n){return w(n).getOrElse(t)});function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function K(t){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function W(t,n){return(W=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function Z(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var tt=1,nt={setPosition:x(function(t,n){var e=n.position;t.x=e.x,t.y=e.y}),setFrame:x(function(t,n){t.frame=n.frame}),setAnchor:x(function(t,n){var e=n.anchor;t.anchor.setTo(e.x,e.y)}),setAnimation:x(function(t,n){var e=n.frame,r=n.animation;r?t.animations.play(r):(t.animations.stop(),t.frame=e)}),setAlive:x(function(t,n){n.alive||t.destroy()}),setAngle:x(function(t,n){var e=n.angle;t.angle=e}),setBodyRadius:x(function(t,n){var e=n.physicsEnabled,r=n.bodyRadius;e&&t.body.setCircle(r,-r+.5*t.width/t.scale.x,-r+.5*t.height/t.scale.y)})},et=x(function(t,n){return N(function(n,e){return rt(t,n,e)},n)}),rt=x(function(t,n,e){var r=t.animations.add(n,e.frames,e.fps,e.loop);e.onDone&&r.onComplete.add(function(){return ot(t,e.onDone)})}),ot=x(function(t,n){return t.eventQueue=X(t.eventQueue,n)}),it=x(function(t,n,e){return e.getOrElse(function(){}).call(null,t,n)}),ut=x(function(t,n,e){var r,o,i;return o="set"+(i=e).charAt(0).toUpperCase()+i.substring(1),r=E(nt)(o),it(t,n)(r)}),at=function(t){function n(t,e){var r,o,i;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),o=this,(r=!(i=K(n).call(this,t,e.position.x,e.position.y,e.asset))||"object"!==U(i)&&"function"!=typeof i?Z(o):i).id=tt++,r.game=t,r.eventQueue=[];var u=r.state=new j(e);return u.physicsEnabled&&(r.game.physics.arcade.enable(Z(Z(r))),r.enableBody=!0),et(Z(Z(r)),u.animations),r.commit(u,Object.keys(u)),r}var e,r,o;return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&W(t,n)}(n,a.a.Sprite),e=n,(r=[{key:"getEventQueue",value:function(){var t=this.eventQueue;return this.eventQueue=[],t}},{key:"commit",value:function(t,n){var e=this;return this.state.$commit(t),(n=n||this.state.$dirty).forEach(function(t){return ut(e,e.state,t)}),this.state.$clean(),t}}])&&Y(e.prototype,r),o&&Y(e,o),n}(),ct=x(function(t,n){return new at(t,n)}),st=x(function(t,n){return t.add.existing(n),n}),ft=x(function(t,n){var e=n.state.group||n.state.collisionGroup||"default";return t.groups[e].add(n),n}),lt=x(function(t,n){var e,r,o;return T(n,{sprite:(o=n,r=ct(t.game)(o),e=st(t.game)(r),ft(t)(e))})}),pt=function(t){return{x:t.centerX,y:t.centerY}},yt=x(function(t,n){var e=X(t._state.spawnQueue,n);return t._state.$commit({spawnQueue:e}),n}),dt=function(t){return J({count:function(){},current:0,loop:!1,done:function(){}})(t)},ht=c_(function(t,n){var e,r;return r=n,e=F(vt)(r),C(mt(P(t.game,1)))(e)}),mt=c_(function(t,n){var e,r;return r=n,e=bt(t)(r),gt(e)}),vt=function(t){return t.loop||t.current<t.count()},bt=c_(function(t,n){return T(n,{current:n.current+t})}),gt=function(t){return t.current>=t.count()?(t.done(),t.loop?T(t,{current:0}):t):t};var wt=function t(n,e){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r="",o=0;o<e.length;o++)this[r=e[o]]=n.add.group(),this[r].name=r},xt=J({alive:!0,events:null,asset:"",frame:0,position:{x:0,y:0},anchor:{x:.5,y:.5},animations:{},animation:null,angle:0,physicsEnabled:!1,bodyRadius:8,collisionGroup:-1,collisions:{},gravity:!1,velocity:{x:0,y:0},angVelocity:0,update:x(function(t,n){return n})}),_t=function(t){return T(t,{alive:!1})},Ot=function(t){return t.alive};function jt(t,n){this.x=void 0===t?0:t,this.y=void 0===n?0:n}jt.prototype={set:function(t,n){this.x=t||0,this.y=n||0},clone:function(){return new jt(this.x,this.y)},add:function(t){return new jt(this.x+t.x,this.y+t.y)},subtract:function(t){return new jt(this.x-t.x,this.y-t.y)},multiply:function(t){return new jt(this.x*t,this.y*t)},divide:function(t){return new jt(this.x/t,this.y/t)},scale:function(t){return new jt(this.x*t,this.y*t)},dot:function(t){return this.x*t.x+this.y*t.y},moveTowards:function(t,n){n=Math.min(n,1);var e=t.subtract(this);return this.add(e.scale(n))},magnitude:function(){return Math.sqrt(this.magnitudeSqr())},magnitudeSqr:function(){return this.x*this.x+this.y*this.y},distance:function(t){return Math.sqrt(this.distanceSqr(t))},distanceSqr:function(t){var n=this.x-t.x,e=this.y-t.y;return n*n+e*e},normalize:function(){var t=this.magnitude();return new jt(this.x/t,this.y/t)},angle:function(){return Math.atan2(this.y,this.x)},angleBetween:function(t){return this.angle()-t.angle()},rotate:function(t){var n=Math.cos(t),e=Math.sin(t),r=new jt;return r.x=this.x*n-this.y*e,r.y=this.x*e+this.y*n,r},toPrecision:function(t){var n=this.clone();return n.x=n.x.toFixed(t),n.y=n.y.toFixed(t),n},perpRight:function(){return new jt(-this.y,this.x)},toString:function(){var t=this.toPrecision(1);return"["+t.x+"; "+t.y+"]"}};var St=c_(function(t,n){return new jt(n.x,n.y).subtract(new jt(t.x,t.y))}),At=function(t){return new jt(0,1).rotate(B(t))},Et=c_(function(t,n){return n.multiply(t)}),Pt=c_(function(t,n){return St(t,n).normalize()}),Tt=c_(function(t,n){return new jt(t.x,t.y).add(n)}),kt=function(t){return new jt(t.x,t.y).magnitude()},Mt=c_(function(t,n){return(n=new jt(n.x,n.y)).magnitude()>t?n.normalize().multiply(t):n});function Rt(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(e.push(u.value),!n||e.length!==n);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ct={x:0,y:-150},$t=x(function(t,n){var e,r,o;return o=n,r=I("gravity",Qt(Ct,t))(o),e=Bt(t)(r),Gt(t)(e)}),Bt=x(function(t,n){return n.position={x:n.position.x+n.velocity.x*t,y:n.position.y+n.velocity.y*t},n}),Qt=x(function(t,n,e){var r=e.velocity;return e.velocity={x:r.x-t.x*n,y:r.y-t.y*n},e}),Dt=x(function(t,n){var e,r;return r=Object.entries(n.collisions),e=C(It(t,n))(r),T(n)(e)}),It=x(function(t,n,e){var r,o=Rt(e,2),i=o[0],u=o[1];return r=C(function(e){return t.game.physics.arcade.overlap(n.sprite,e)?(console.log("collision",i,u),u(t,n,e)):n},t.groups[i].children),H(r)}),Ft=x(function(t,n){return T(n,{velocity:Mt(t,n.velocity)})}),Gt=x(function(t,n){return n.angle+=n.angVelocity*t,n}),Vt={Player:"player",Asteroid:"asteroid"},qt=(x(function(t,n){return e=t.position,r=n.position,new jt(e.x,e.y).distance(new jt(r.x,r.y))<=t.collisionRadius||distance<=n.collisionRadius;var e,r}),x(function(t,n){var e,r=Nt(t);return T(xt({alive:!0,asset:"spritesheet",frame:0,animations:{},angle:0,physicsEnabled:!0,bodyRadius:8,collisionGroup:Vt.Asteroid,update:Ht}),{position:r,velocity:(e=Pt(r,Lt(t)),Et(R(50,150))(e)),frame:R(0,4),angle:R(0,359),angVelocity:R(-180,180)})})),Ht=x(function(t,n){return Xt(t,n)?_t(n):n}),Lt=function(t){var n;return n=pt(t.game.world),zt(400)(n)},zt=x(function(t,n){return{x:$(n.x,t),y:$(n.y,t)}}),Jt=function(t){var n;return{0:{x:-32,y:(n=function(t){return{x:R(0,t.game.width),y:R(0,t.game.height)}}(t)).y},1:{x:t.game.width+32,y:n.y},2:{x:n.x,y:-32},3:{x:n.x,y:t.game.height+32}}},Nt=x(function(t){var n;return n=R(0,4),E(Jt(t))(n).getOrElse({x:0,y:0})}),Xt=x(function(t,n){return n.position.x<-50||n.position.x>t.game.width+50||n.position.y<-50||n.position.y>t.game.height+50}),Ut=x(function(t,n){return dt({count:n,loop:!0,done:function(){var n;return n=qt(t,{}),yt(t)(n)}})}),Yt=c_(function(t,n,e,r){return E(n,r).getOrElse(function(){console.warn("No event '".concat(r,"' found for entity:"),e)}).call(null,t,e)});function Kt(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(e.push(u.value),!n||e.length!==n);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Wt={Accelerate:87,RotateRight:68,RotateLeft:65,Boost:32,Restart:70},Zt=L(!1,Object.values(Wt)),tn=new j(Zt),nn=x(function(t,n,e){return tn[t]?n(e):e}),en=x(function(t,n,e){return!tn[t]&&tn.$old[t]?n(e):e}),rn=x(function(t,n,e){return tn[t]&&!tn.$old[t]?n(e):e}),on=x(function(t,n){return Object.entries(tn).find(function(t){var n=Kt(t,2);n[0];return!0===n[1]})?t(n):n});document.addEventListener("keydown",function(t){return function(t){t.preventDefault(),tn.hasOwnProperty(t.keyCode)&&(tn[t.keyCode]=!0)}(t)}),document.addEventListener("keyup",function(t){return function(t){tn.hasOwnProperty(t.keyCode)&&(tn[t.keyCode]=!1)}(t)});var un="done",an=function(t){return function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.reduce(function(t,n){return n(t)},t.apply(null,r))}}(At,Et(16),Tt(t.position))(t.angle)},cn=function(){return e=function(t,n){return _t(n)},(n=un)in(t={})?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t;var t,n,e},sn=c_(function(t,n){return T(xt({alive:!0,group:"default",position:{x:100,y:100},frame:0,anchor:{x:.5,y:.5},asset:"spaceship",animations:{play:{frames:[6,7,8,9],fps:20,onDone:un}},animation:"play"}),{position:an(n),events:Yt(t,cn())})});var fn="done",ln=function(){return e=function(t,n){return _t(n)},(n=fn)in(t={})?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t;var t,n,e},pn=c_(function(t,n){return T(xt({alive:!0,group:"default",position:{x:100,y:100},frame:0,anchor:{x:.5,y:.5},asset:"spaceship",animations:{flip:{frames:[12,13,14,15],fps:10,onDone:fn}},animation:"flip"}),{position:n.position,angle:n.angle,events:Yt(t,ln())})});var yn="done",dn=function(){return e=function(t,n){return _t(n)},(n=yn)in(t={})?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t;var t,n,e},hn=c_(function(t,n){return T(xt({alive:!0,group:"default",position:{x:100,y:100},frame:0,anchor:{x:.5,y:.5},asset:"explosion",animations:{play:{frames:[0,1,2,3],fps:10,onDone:yn}},animation:"play"}),{position:n.position,events:Yt(t,dn())})}),mn={},vn=function(t,n){mn[t]=n},bn=function(t){mn[t].play()},gn=function(t){mn[t].loopFull()},wn=function(t){mn[t].stop()},xn=function(t){return bn(t)},_n=x(function(t,n){var e=t.game.add.audio(n);vn(n,e)});var On="done",jn=function(){return e=function(t,n){return _t(n)},(n=On)in(t={})?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t;var t,n,e},Sn=c_(function(t,n){return T(xt({alive:!0,group:"default",position:{x:100,y:100},frame:0,anchor:{x:.5,y:.5},asset:"spaceship",animations:{flip:{frames:[18,19,20],fps:30,onDone:On}},animation:"flip"}),{position:n.position,angle:n.angle,events:Yt(t,jn())})});function An(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var En={Boost:"boost",Die:"died"},Pn=c_(function(t,n){var e,r,o,i,u,a=nn,c=en,s=rn,f=Wt;return u=n,i=a(f.Accelerate,Ln(t))(u),o=c(f.Accelerate,zn)(i),r=a(f.RotateRight,Jn(t,1))(o),e=a(f.RotateLeft,Jn(t,-1))(r),s(f.Boost,Nn(t))(e)}),Tn=c_(function(t,n,e){return $n(t,n)}),kn=c_(function(t,n){var e;return e=sn(t,n),yt(t)(e),t.game.camera.shake(.01,60),n}),Mn=c_(function(t,n){var e,r;xn("flip"),e=pn(t,n),yt(t)(e);var o=(r=G(100,400,t._state.playerVelocity),V(.05,.2)(r));return t._state.$commit({score:t._state.score+t._state.score*o,flips:t._state.flips+1}),n}),Rn=c_(function(t,n){var e,r,o,i,u,a,c;return c=n.input(n),a=In(c),u=Fn(t)(a),i=Bn(t)(u),o=Dn(t)(i),r=Ft(400)(o),e=Qn(t)(r),Cn(t)(e)}),Cn=c_(function(t,n){return t._state.$commit({playerVelocity:kt(n.velocity)}),n}),$n=c_(function(t,n){var e;return xn("dead"),t.game.camera.shake(.04,120),e=hn(t,n),yt(t)(e),n.events(n,En.Die),t._state.$commit({end:!0}),_t(n)}),Bn=c_(function(t,n){return qn(t,n)?n:(t.game.camera.shake(.01,60),T(n,{position:{x:n.position.x<0?5:t.game.width-5,y:n.position.y},velocity:{x:-1*n.velocity.x,y:n.velocity.y}}))}),Qn=c_(function(t,n){return n.position.y<t.game.height?n:$n(t,n)}),Dn=c_(function(t,n){return Hn(t,n)?n:(t.game.camera.shake(.01,60),T(n,{position:{x:n.position.x,y:5},velocity:{x:n.velocity.x,y:-1*n.velocity.y}}))}),In=function(t){return Gn(t)?Vn(t):t},Fn=c_(function(t,n){var e;kt(n.velocity)>380&&(e=Sn(t,n),yt(t)(e));return n}),Gn=function(t){return Math.abs(t.rotationSinceAcceleration)>=360},Vn=function(t){return T(t.events(t,En.FlipBonus),{rotationSinceAcceleration:0})},qn=c_(function(t,n){return n.position.x>0&&n.position.x<t.game.width}),Hn=c_(function(t,n){return n.position.y>0}),Ln=function(t){return function(n){var e,r;return T(n,{animation:"boost",rotationSinceAcceleration:0,velocity:(r=At(n.angle),e=Et(-n.state.thrustSpeed*P(t.game))(r),Tt(n.velocity)(e))})}},zn=function(t){return T(t,{animation:null})},Jn=c_(function(t,n,e){var r=n*e.state.rotateSpeed*P(t.game);return T(e,{angle:e.angle+r,rotationSinceAcceleration:r<0&&e.rotationSinceAcceleration<0||r>0&&e.rotationSinceAcceleration>0?e.rotationSinceAcceleration+r:r})}),Nn=c_(function(t,n){var e,r;return xn("boost"),t._state.$commit({jumps:t._state.jumps+1}),T(n.events(n,En.Boost),{velocity:(r=At(n.angle),e=Et(25*-n.state.thrustSpeed*P(t.game))(r),Tt(n.velocity)(e))})}),Xn=function(){return xt({state:{thrustSpeed:400,rotateSpeed:270,rotationSinceAcceleration:0},asset:"spaceship",frame:0,animations:{boost:{frames:[1,2,3,4],loop:!0,fps:10}},physicsEnabled:!0,bodyRadius:8,collisionGroup:Vt.Player,collisions:An({},Vt.Asteroid,Tn),gravity:!0,update:Rn})},Un={font:"bold 24px Orbitron",fill:"#999"},Yn={font:"bold 16px Orbitron",fill:"#666"},Kn={font:"bold 32px Helvetica, Arial",fill:"#999",boundsAlignH:"center"},Wn={font:"48px Orbitron",fill:"#fff",boundsAlignH:"center"},Zn={font:"16px Orbitron",fill:"#757575",boundsAlignH:"center"},te={font:"16px Orbitron",fill:"#757575",boundsAlignH:"center"},ne={font:"24px Orbitron",fill:"#0f0",boundsAlignH:"center"},ee=760,re=480,oe=J({paused:!1,started:!1,end:!1,jumps:0,flips:0,bonus:0,score:0,elapsedTime:1,playerVelocity:1,gameObjects:[],spawnQueue:[],timers:[]});function ie(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ue=function(t,n){t._refs={},t._state=new j(oe(n)),t.groups=new wt(t.game,["default"].concat(ie(Object.values(Vt)))),function(t){z(_n(t),Object.keys(o))}(t),window.sg=t},ae=function(t){var n;t._refs.score=t.game.add.text(20,20,0,Un),t._refs.bonus=t.game.add.text(20,46,0,Yn),n=function(t,n){var e,r;return T(Xn(),{position:pt(t.world),input:Pn(t),events:(e=T((An(r={},En.Boost,kn),An(r,En.FlipBonus,Mn),r),n),Yt(t)(e))})}(t,xe()),yt(t)(n),gn("gameOST")},ce=function(t,n){var e;t._state.end&&rn(Wt.Restart,function(){return me(t)},{}),t._state.started||on(function(){return function(t){var n;t._state.timers=(n=Ut(t,function(){return _e(t)}),X(t._state.timers)(n)),t._state.$commit({started:!0})}(t)},{}),e=se(t,n),n.$commit(e),tn.$clean(),de(t)},se=function(t,n){var e;return n.started&&(n.gameObjects=pe(t,n.gameObjects),n.elapsedTime=n.end?n.elapsedTime:n.elapsedTime+P(t.game,1),n.score=n.end?n.score:fe(t),n.timers=ht(t)(n.timers)),n.gameObjects=(e=le(t,n.spawnQueue),M(n.gameObjects)(e)),n.spawnQueue=[],n},fe=function(t){var n=t._state,e=t.game;return n.score+P(e,1)*n.elapsedTime*(he(n)+1)},le=c_(function(t,n){var e,r;return r=n,e=F(function(t){return!t.sprite})(r),C(function(n){return lt(t,n)})(e)}),pe=c_(function(t,n){var e,r;return r=n,e=C(ye(t))(r),F(Ot)(e)}),ye=c_(function(t,n){var e,r,o,i,u;return u=n,i=D("physicsEnabled")($t(P(t.game)))(u),o=D("update")(function(n){return n.update(t,n)})(i),r=D("events")(ge)(o),e=D("physicsEnabled")(Dt(t))(r),we(e)}),de=function(t){var n=he(t._state);t._refs.score.text=be(t),t._refs.bonus.text=ve(n),n<10?t._refs.bonus.addColor("#666",0):n<15?t._refs.bonus.addColor("#20381a",0):n<19?t._refs.bonus.addColor("#48ce27",0):t._refs.bonus.addColor("#e51ee9",0)},he=function(t){var n;return n=G(100,400,t.playerVelocity),V(0,20)(n)},me=function(t){return t.state.start("Game")},ve=function(t){return"x"+Math.floor(t)},be=function(t){var n;return n=Math.floor(t._state.score),Q(n)},ge=function(t){var n,e,r;return r=t.sprite.getEventQueue(),e=C(t.events(t))(r),n=H(e),k(t)(n)},we=function(t){return t.sprite.commit(t)},xe=function(){return e=function(t,n){wn("gameOST"),Re(t)},(n=En.Die)in(t={})?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t;var t,n,e},_e=function(t){var n;return n=G(0,60,t._state.elapsedTime),q(1,.15)(n)},Oe=c_(function(t,n,e,r){t.game.add.text(0,e,r,n).setTextBounds(0,0,t.game.width,100)}),je=function(t){xn("boost"),t.game.camera.shake(.04,120)},Se=function(t){return dt({count:function(){return 1.5},done:function(){je(t),Oe(t,Kn,50,"SCORE")}})},Ae=function(t){return dt({count:function(){return 2},done:function(){var n;je(t),n=be(t),Oe(t,Wn,86)(n)}})},Ee=function(t){return dt({count:function(){return 2.5},done:function(){return Pe(t)}})},Pe=c_(function(t){Oe(t,Zn,140,"Press [F] to restart"),Me(t,-140,"JUMPS",t._state.jumps),Me(t,0,"TIME",ke(t._state.elapsedTime)),Me(t,140,"FLIPS",t._state.flips)}),Te=function(t){return t<10?"0"+t:t},ke=function(t){var n=Math.floor(t/60);return t=Math.floor(t%60),"".concat(Te(n),":").concat(Te(t))},Me=function(t,n,e,r){t.game.add.text(0,0,e,te).setTextBounds(t.game.world.centerX+n-50,210,100,100),t.game.add.text(0,0,r,ne).setTextBounds(t.game.world.centerX+n-50,180,100,100)},Re=function(t){t._state.timers=M(t._state.timers,[Se(t),Ae(t),Ee(t)])},Ce={init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ue(this,t)},create:function(){ae(this,this._state)},update:function(){ce(this,this._state)}};function $e(t){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Be(t,n){return!n||"object"!==$e(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function Qe(t){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function De(t,n){return(De=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}new(function(t){function n(){var t;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);document.documentElement;for(var e in t=Be(this,Qe(n).call(this,ee,re,a.a.CANVAS,"content",null)),i)t.state.add(e,i[e],!1);return t.state.start("Splash"),t}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&De(t,n)}(n,a.a.Game),n}())}});